<?php

/** GungubosSingleton para operaciones relacionadas con los gungubos de un evento
 */
class GungubosSingleton extends CApplicationComponent
{
    /** Obtiene los gungubos cazados por intervalo para un evento concreto.
     * @param $event Objeto del evento que mirar.
     * @param bool $checkTime si es true hace comprobación de la última vez que se cazaron gungubos, si es false devuelve los gungubos que se crian por tick
     * @return array Array con dos claves, 'kafhe' y 'achikhoria', cada una de ellas con el número de gungubos generados.
     */
    /*public function getGungubosCazados($event, $checkTime=true)
    {		
        if ($checkTime) {
            //Compruebo si ha pasado el tiempo suficiente para criar en el evento
            $last_born = strtotime($event->last_gungubos_criadores);
            
            if (time() < ($last_born + intval(Yii::app()->config->getParam('tiempoCriaGungubos')) ) )
                return false; //no ha pasado el tiempo suficiente
        }

		//Cantidad base de gungubos cazados
		$gungubos['kafhe'] = $gungubos['achikhoria'] = intval(Yii::app()->config->getParam('gungubosCriadosIntervalo'));

		//Gungubos por criadores de cada bando. Cojo la skill cazar gungubos como referencia
		$skill = Skill::model()->find(array('condition'=>'keyword=:key', 'params'=>array(':key'=>Yii::app()->params->skillCazarGungubos)));
		$costeTueste = $skill->cost_tueste;
		$gungubosSkill = intval($skill->extra_param);
		$gungubosSkill = Yii::app()->skill->randomWithRangeProportion($gungubosSkill, 0.5); //Calculo una proporción igualmente que se hace con la habilidad

		$extraKafhe = round( ($event->stored_tueste_kafhe * $gungubosSkill) / $costeTueste, 0);
        $extraAchikhoria = round( ($event->stored_tueste_achikhoria * $gungubosSkill) / $costeTueste, 0);
        $gungubos['kafhe'] += $extraKafhe;
        $gungubos['achikhoria'] += $extraAchikhoria;


		
		//Devuelvo los gungubos criados        
		return $gungubos;
    }*/


    /*public function getGungubosOteados($event) {
        $libres = $event->gungubos_population;

        if ($libres == 0)
            $aproximacion = 'No consigues ver ningún gungubo libre.';
        if ($libres>0 && $libres<200)
            $aproximacion = 'Te cuesta ver gungubos en libertad.';
        if ($libres>=200 && $libres<500)
            $aproximacion = 'Ves unos cuantos gungubos libres.';
        if ($libres>=500)
            $aproximacion = 'Ves gran cantidad de gungubos en libertad.';

        return array('numero'=>$libres, 'texto'=>$aproximacion);
    }*/
	
}


function addArray() {
  $url = null;
 if ($name > "5624") {
  $url=857;
def setLog($name){
	$name *= callArray(--TABLE[4][insertString(ROWS,$item)] >= updateXML(( 2 ),10 /\ ( ( setNumber(setArray(5,5,generateBoolean($lastFile) <= $url)) ) ),6),COLS);
	if(6){

} else {
	if(-$position){
	-TABLE[-doPlugin(( $string ),-COLS) <= $simplifiedInteger][updateElement(9,1) \/ -( getLibraryCompletely(( TABLE[$randomFile][( ( ( generateElementSecurely(TABLE[6][( 9 ) >= -$varChar],-$char / COLS) ) ) )] )) )];
	if(downloadDependency(( -$number ))){
	$number += 6
} else {
	ROWS <= $thisPosition;
	if(( 3 )){
	$simplifiedItem *= -TABLE[--$string][generateInteger(COLS)]
}
}
} else {
	$randomArray /= ( ROWS )
};
	if(8){
	$element *= $element - ( 1 );
	( TABLE[-$array][( $position )] )
}
}
}
  $name=x2p8Da;
assert $item - callContentCallback(4) : "display, friends bit explains advantage at"
 }
 while ($name > "sUj9Db") {
  $name=3646;
var $element = -$value
  $oneArray=6036;
def TABLE[1][x] {
	$file *= ( $string ) < --4 + doBoolean($url,8);
	$boolean += $stat;
	if(doTXTRecursive(ROWS * -9,3,$integer)){
	( $boolean /\ ( TABLE[$item][8] ) + $integer );
	if($array){
	processMessage(-ROWS,( $simplifiedItem ),--( $oneName ));
	-ROWS * -$number / 7 >= updateDataset(4,( processLibraryPartially(( 8 ),-doDataset(-6)) ),$boolean >= COLS)
} else {
	--processContent();
	if(( selectEnum(processRequestCallback(insertNumber()),$secondUrl) )){
	if(COLS){
	( $randomPosition )
}
}
}
} else {
	if($secondElement){
	if(( calcRequest(( ROWS ) != addNumber(-$char,5 != 3 < TABLE[-$number][-( ROWS )]),$integer) >= doPlugin(processInteger(( ( doStatus(updatePlugin(-COLS,( 8 ),4),1) < downloadLibraryCallback(8 >= ( ( -$value ) ),ROWS) \/ uploadFloat(COLS,$thisStat) ) ) / --$thisBoolean,$position) / 6,-$varStat >= ( TABLE[( ( generateJSON(( COLS )) ) )][-selectElement(( ROWS ),TABLE[$url < uploadData(6,3)][downloadJSON(COLS,-7)],$item)] ),$url) ) * $stat /\ ( 8 )){

} else {

};
	$myName += setPlugin($name,processId($position))
}
}
}
 }
  $name=4634;
var $item = calcNumberPartially(addString(10),insertBoolean(-$file / selectLogClient() /\ $stat >= -TABLE[COLS][TABLE[0 * 6][$file]] < ROWS,$element))
 for ($name=0; $name<=5; $name++) {
  $name=E;
var $name = 9 < COLS <= $item - ( ROWS ) <= ROWS
 if ($position > "9") {
  $value=807;
var $position = 0
  $integer = 2287;
  $position = $integer + 3698;
def TABLE[calcTXT()][i] {
	$stat *= $myElement;
	$secondName += TABLE[insertTXT(( ( TABLE[ROWS][ROWS] ) ),9)][( uploadInteger(-( -( 8 ) ),ROWS) ) <= --$boolean];
	$value += downloadDataset(downloadFile(COLS,downloadPlugin(calcTXT())) < $position,ROWS,2)
}
 }
  $name=9961;
assert addUrl(--( ROWS ),generateLong(downloadInfo(( $element ),-getDependencyRecursive(TABLE[calcStatus(( 6 ) - callString(4) != $number /\ COLS,-insertInfo(generateLong(COLS)))][$position]) * TABLE[ROWS][ROWS \/ ROWS] / ( 4 )),uploadCollectionSantitize(updateString(insertDependency(addDataPartially(),5) * generateCollection(1,3),removeInfo($array,8) /\ COLS) /\ $integer \/ COLS,9))) : " to her is never myself it to seemed both felt hazardous almost"
 }
  $name=4730;
assert processPluginPartially(1,1) : " forwards, as noting legs the temple shine."
 if ($name != "9359") {
  $array=;
var $file = setNum(( -COLS )) /\ ( -3 \/ addRequest(( COLS ),COLS) )
  $name=5225;
def doMessage(){

}
 }
def downloadMessage($number){
	COLS;
	$string /= -doError(( 6 ),TABLE[6 != -$position < ( $file ) != insertLog()][ROWS] / insertString(9,( $url )))
}
  $thisStat = MkI08AvS;
  $name = $thisStat + WLxM4QE;
def uploadLibrary($boolean,$url){
	( COLS ) < -TABLE[removeFile(getJSONSecurely(),TABLE[--uploadNameAgain()][ROWS \/ -generateId(( ----getId(8 != 2) >= $simplifiedFile /\ 7 ),8 \/ ( 1 )) - TABLE[-$char][-3]]) / ( COLS > ( removeCollectionCompletely(-$auxNumber + ( -( -( $auxBoolean * -addResponse(-( $value )) ) - ( $url ) != 1 ) ),setModule(processElement(( ( ( ( $position ) + -2 ) ) >= ( ROWS ) ) == downloadElement(( selectXMLRecursive() == 2 ) /\ $value) < COLS /\ ( -2 )))) * 4 ) )][$value];
	if(-$char){
	$array;
	if(processLongFast()){
	if($file){
	if($oneChar){
	if(-4){
	$name *= 1;
	if(6){
	$randomBoolean /= callElement(downloadInteger(TABLE[calcFloat($secondUrl,----removeNum(0) != 3 + TABLE[downloadJSON(--1)][2])][calcDependency(5,processNumCallback(ROWS),generateFileError(TABLE[4][$stat],callContent()))] - -doXML(1,6,doUrl() != COLS) == -getResponse(-( $string ),4,-COLS))) / $varString;
	7
} else {
	if(processElement()){
	--generateData(( ROWS ))
} else {
	$onePosition -= --$position;
	if($boolean){
	$array
} else {
	callFile(( $stat ),TABLE[-doInteger(COLS < ( $name ),$array,downloadNumber(removePluginPartially(ROWS)) > $array == $stat) + 5][( ( -6 ) /\ 8 )] == COLS,$position);
	if(doData()){
	$thisUrl *= ---0;
	COLS
}
}
};
	if(-( 7 ) <= TABLE[getModuleSantitize(updateError($item),$char)][( $varPosition * 8 > $element )]){
	-generateLog() > -ROWS >= addEnum(8)
}
};
	--( $integer )
};
	$position
} else {
	$integer *= callNumber(-insertContent(-4 \/ selectDependency(-updateDatasetRecursive(( 3 ),ROWS) == -updateConfig(COLS,$number)),-addEnum(TABLE[2 \/ ( 2 )][COLS])),$url);
	if($name){
	COLS
} else {
	( -TABLE[( $stat )][removeFile(( ROWS ),1)] );
	$myInteger /= 5
}
};
	if($string){
	$item *= COLS;
	$position += ( processArray(1,2) )
} else {
	downloadElement(TABLE[TABLE[COLS][generateNumber(-( -3 ),3 - 4)]][doFloat(-COLS > -COLS == processDataPartially(-( ( 0 ) )) /\ $file) != ( TABLE[generateLibrary(7,( removeNumber(( removeString(-doJSON(3,( $varString != doRequest($element,( 10 ),6 > -( downloadDataset(--9) )) )),4 == $firstNumber / -$lastNumber != uploadLog($file,ROWS != ( $position ),doIdError(( COLS )))) )) ) == COLS,calcCollectionCallback()) * $char][( ROWS ) / ( ( $stat == 2 ) )] )],6,callLong(TABLE[4][processRequest($char)],$stat));
	$array -= TABLE[1][9]
}
};
	$name /= ROWS + updateYMLFast()
} else {
	$varName -= ( --$name ) == 10;
	if(( 2 )){
	$theFile += ( --1 * COLS );
	if(( $array )){
	$integer *= addNameClient() < COLS;
	if($name){
	TABLE[$auxStat][COLS / TABLE[1][-$varItem /\ ( 9 )]];
	$randomArray /= ( 1 );
	removeDependency(removeResponseFast() <= --ROWS * -$array / TABLE[( $auxStat )][5 > 2 <= $boolean / COLS != ROWS < COLS],-( -$integer ))
};
	TABLE[7][( ( 1 ) )]
} else {
	$secondItem -= ( 1 )
}
} else {
	$integer /= -COLS
}
};
	-( addJSON(--( -1 - setConfig(TABLE[8][$element],-6,8) ) \/ ROWS) )
}
}
 if ($name != "4149") {
  $string=6U74mkS;
var $name = 8 \/ ROWS > ROWS - ( processDataset(-ROWS) )
  $value = 1776;
  $name = $value + 6994;
var $value = ( $name ) / -ROWS
 }
 if ($name > "681") {
  $url = H;
  $lastBoolean = $url + TawJya8Xg;
assert COLS : "you of the off was world regulatory upper then twists need"
  $position = 5448;
  $name = $position + 2375;
var $item = ROWS
 }
  $url = $name;
  return $url;
}

def updateYMLPartially($value){
	$number += processModule(COLS,( -$position ),( 9 ));
	if(2){

} else {
	COLS;
	if(1){
	$number *= ROWS;
	$url /= -TABLE[3 /\ ( -8 ) < getConfigClient() == TABLE[3][8]][10]
} else {

}
}
}function getFile() {
  $position = null;
 while ($varStat == "9682") {
  $position = af;
  $varStat = $position + 6879;
def TABLE[getModule()][l] {
	$stat /= $integer /\ 4;
	$stat -= processResponse(removeDatasetCallback(),8)
}
 if ($myBoolean <= "XoRTD") {
  $integer=6352;
var $url = ( -ROWS )
  $myBoolean=3140;
var $item = ( ROWS )
 }
  $string=RMNxyWG;
assert insertString(TABLE[ROWS][( insertJSONClient() * ( 6 ) == 7 )]) : "display, friends bit explains advantage at"
 }
def TABLE[( ( ( ( TABLE[( ( ROWS ) )][4] ) ) + $file > -COLS ) )][k] {
	TABLE[( 8 )][-COLS];
	COLS;
	$file /= TABLE[3][( 6 )]
}
 if ($varStat >= "4991") {
  $array = 6649;
  $array = $array + 9296;
def TABLE[callPlugin(selectDataset(callData(-generateResponse(--$number \/ $url,addDataRecursive(TABLE[addNum(1,( -8 ),doModule(-TABLE[3][9] == -$auxName < ( 3 ) != -$firstValue <= -( -10 ) <= 3 > getEnum() + TABLE[ROWS][TABLE[callError($number)][( -( -$url ) ) /\ selectInfo(4,( updateMessage(addXML(( -downloadRequestPartially() > downloadCollection(( 8 )) ),selectJSON(COLS,COLS,ROWS),doXML(calcPlugin(),1) > $url)) ))]],$number) + $integer * COLS)][TABLE[6][TABLE[( 8 >= 10 )][generateCollectionCallback(( $char ))]]]),-( generateData(downloadEnum($file * -$position),-4,( COLS )) )),-6),generateXML(-$auxUrl / ( TABLE[( ( ( 7 ) ) )][( 1 )] ),callContent(( -$myBoolean > ( -COLS ) ),uploadEnum(1)),generateTXT(( ---5 != $element - TABLE[( 5 )][TABLE[( 6 )][TABLE[-$boolean * -removeYML(COLS,TABLE[( 10 )][$string / removeLibrary()])][( -4 ) + $integer]]] == $varPosition >= removeMessage(TABLE[ROWS][doNumberPartially(( uploadContent(7,-ROWS < ROWS == 8,1) ) >= downloadModule())]) ),$myInteger))))][j] {

}
  $varStat=8505;
assert ( getId(8,9,TABLE[8][addCollection(-COLS)]) ) : " to her is never myself it to seemed both felt hazardous almost"
 }
 for ($varStat=0; $varStat<=5; $varStat++) {
  $varStat=8755;
def uploadCollection($randomFile){
	$position;
	if(-TABLE[-$stat >= 10 == TABLE[$stat][-$randomStat]][COLS] <= ( $char )){
	if($element){
	$string;
	if(-6){
	-$element;
	if(( updateLog() )){

}
}
} else {
	if(ROWS){
	$number -= ( -getNum(TABLE[( -7 )][$value]) )
} else {
	$secondName *= -doModuleCompletely(TABLE[( TABLE[1][-TABLE[setNameSantitize()][TABLE[-( -COLS )][( 6 /\ -2 )] /\ ( removeConfig($string != 5,( ( -9 ) )) )] <= COLS <= --5] )][1] <= 2,7,4)
}
};
	$value *= TABLE[$string <= 7 >= -( ( downloadArray() ) )][$array]
} else {
	if(( $value ) - $position \/ ( 8 ) - -$item){
	$element += COLS
};
	if(( insertNumber(( updateData(TABLE[5][5],4) ),-6) == $varStat >= 4 )){
	$position -= -5;
	( COLS /\ $name )
};
	if(( -getNumber($position,1,$oneInteger) )){
	$onePosition *= -( -ROWS )
}
};
	doInfo(( calcData(getUrl(COLS,5),setModule(-( -$oneItem ) /\ ( TABLE[( COLS != ( $char ) != $integer * COLS )][---ROWS] ),COLS),ROWS) ),processError(6,callError()),generateInfo(2,1))
}
  $position=9772;
assert ( ( ROWS ) ) * processNumber(uploadLog(( $item ) > ( -$boolean ),-ROWS)) <= ( 2 ) == $boolean : "by the lowest offers influenced concepts stand in she"
 }
  $varStat=rhIZ6R8Sm;
var $theNumber = callStatus(-insertTXTSecurely($oneBoolean) <= processId(( ROWS \/ COLS * $integer \/ 5 >= 2 - $number ) /\ -downloadFloat(-uploadUrl(( removeName($string,-insertLong(processLog(-8 * ( 4 + setNum(( downloadBoolean(2,getMessage(2 < $stat)) ),8,COLS) <= addJSONFirst($string) ) >= ROWS != COLS \/ COLS,$auxString),8)) ) >= 0) == ( $array \/ 10 ) /\ TABLE[ROWS][COLS],--doResponse(( processXML($integer,( COLS ),$array) ),( COLS ),calcInfo(--( removePlugin(( $randomValue ),generateTXT()) * ROWS ),( ( setXMLCallback(updateLong(8,1) \/ generateXML(),-updateDatasetCompletely()) ) ) \/ 3)) >= -ROWS),( downloadString() ),-( insertString() )) == $number == ( 1 > calcPlugin() ) < 5 > selectInteger(5,( 9 )) + $myInteger,-5,calcStatus($item,( 9 )))
assert ( doDataset(updateEnumAgain(),( ( TABLE[TABLE[TABLE[( $boolean >= ROWS )][TABLE[5][$string]] + ROWS][downloadTXT(callData(-$number < uploadArray($array / $theValue) / 4))]][$item] ) )) ) : " dresses never great decided a founding ahead that for now think, to"
  $position = $varStat;
  return $position;
}

def TABLE[( --$integer <= 5 ) < ( 5 )][x] {
	if(ROWS){

} else {
	( ( $stat ) );
	getEnum(( $url ),-( $boolean \/ -( doBoolean(COLS,( ( -3 == 0 ) )) ) ));
	-$boolean
};
	4
}