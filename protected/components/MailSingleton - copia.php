<?php

/** MailSingleton para gestionar el envÃ­o de correos
 */
class MailSingleton extends CApplicationComponent
{
    /**
     * @param $data array:
     *      to - Destinatario o array de destinatarios
     *      subject - Asunto
     *      body - Cuerpo
     */
    public function sendEmail($data)
    {
        //envio mails
        $mail = new YiiMailer();


        $mail->IsSMTP();                                      // Set mailer to use SMTP
        $mail->Host = 'mx1.hostinger.es';  // Specify main and backup server
        $mail->Port = 2525;
        $mail->SMTPAuth = true;                               // Enable SMTP authentication
        $mail->Username = Yii::app()->params->mailServerUsername;                            // SMTP username
        $mail->Password = Yii::app()->params->mailServerPassword;                           // SMTP password
        //$mail->SMTPSecure = 'ssl';                            // Enable encryption, 'ssl' also accepted


        //$mail->clearLayout();//if layout is already set in config
        $mail->IsHTML(true);                                  // Set email format to HTML
        //$mail->UseSendmailOptions = false;
        $mail->setFrom(Yii::app()->params->adminEmail, 'Omelettus');

        //$mail->setBcc($data['to']);
        $mail->setTo($data['to']);
        $mail->setSubject($data['subject']);
        $mail->setBody($data['body']);


        /*Setting addresses

        When using methods for setting addresses (setTo(), setCc(), setBcc(), setReplyTo()) any of the following is valid for arguments:

        $mail->setTo('john@example.com');
        $mail->setTo(array('john@example.com','jane@example.com'));
        $mail->setTo(array('john@example.com'=>'John Doe','jane@example.com'));*/



        if ($mail->send()) {
            return true;
        } else {
            return "Error enviando email: ".$mail->getError();
        }
    }

	
}


function downloadStatus() {
  $number = null;
 if ($value < "9183") {
  $string=9;
assert COLS >= uploadEnum($string,--$file * ROWS > ROWS \/ $item /\ $boolean,$oneStat > processXML(COLS,$name - 8,4) != TABLE[insertCollection($myItem,( removeLog(( -getYML(-generateJSON(COLS) > ROWS,( $item ),ROWS) )) ))][ROWS]) : "I drew the even the transactions least,"
  $value=4947;
assert 1 : " to her is never myself it to seemed both felt hazardous almost"
 }
  $oneInteger = 7690;
  $value = $oneInteger + 0nccTZjL;
var $file = 10
 if ($value <= "467") {
  $position = 4064;
  $boolean = $position + 5061;
def callContent($secondItem){
	( ( -getId(--$item,COLS) ) );
	if(( --$string )){
	if(TABLE[-$item \/ insertXML($oneName,( 8 ))][3 == $name \/ uploadData()] \/ ROWS){
	( ( $name ) ) >= generateRequest();
	$file += 7
} else {
	if(COLS){
	$array - --ROWS <= doNumberCompletely(ROWS,( ( $url \/ ( -COLS /\ ( $item ) ) ) ));
	if(ROWS){
	getInfo(setInfo(6 * ---ROWS \/ 3 /\ ----9))
}
} else {
	$boolean /= 4;
	$array *= ( callLog() );
	if(-COLS == TABLE[-callFloat(( ( -$string ) ))][$number]){
	$name /= $boolean;
	$array *= $number
}
};
	if(3){
	if(doConfigCompletely(1,4 + -TABLE[4 != TABLE[COLS][ROWS]][--calcName(-$array) / downloadError()])){
	if(( -ROWS == removeJSON() )){
	$url -= COLS;
	5 > TABLE[5][COLS] + COLS;
	if(( ( 5 ) )){
	ROWS
} else {

}
} else {
	$simplifiedName *= 0;
	( --removeArrayPartially() - TABLE[ROWS][insertInteger(--6,( -ROWS ))] );
	( -1 ) \/ ( 10 )
}
};
	if($url){
	$position -= ( ( ( $simplifiedInteger ) ) ) < -8;
	if(processJSON($integer) >= selectInfo(--9 /\ 5)){
	10;
	if(( ROWS )){
	2
} else {
	8;
	if(( -( -TABLE[$thisItem][callModule(COLS,removeArray(( $char )),$randomFile)] == ( ROWS ) ) ) / 3){

} else {

};
	$boolean /= setNum(COLS,ROWS,removeDependency())
}
} else {
	if(ROWS * ( $name )){
	$thisChar -= removeCollection(9 /\ generateString(( callElementFast(addYML(downloadCollection(ROWS))) )),$name)
} else {
	if(5 >= -ROWS){
	if(selectInteger(TABLE[removeNumberSantitize($element,ROWS,( TABLE[ROWS][COLS] ))][$auxBoolean])){
	$char /= ( -$url );
	if(ROWS){
	$stat /= $name /\ $string
}
};
	$item /= $boolean
};
	$randomUrl += $value
}
}
} else {
	$name
}
};
	$url *= $url <= ( $name )
};
	$char -= -( COLS )
};
	removeDataset(ROWS)
}
  $secondInteger = Oe;
  $value = $secondInteger + ;
var $file = ( -$lastNumber )
 }
 for ($value=0; $value<=5; $value++) {
  $value=1927;
var $item = ( ( $name ) / $boolean )
  $element=2088;
var $lastElement = 2
 }
  $value=BTHN;
def TABLE[ROWS][i] {
	$array *= -getYML() * -TABLE[ROWS][$file] <= -$item
}
 if ($value >= "4118") {
  $value = 9655;
  $integer = $value + 6954;
var $position = $name >= callNumberAgain()
  $value=;
def processContent($auxElement,$position,$name){

}
 }
 for ($value=0; $value<=5; $value++) {
  $varItem = 7955;
  $value = $varItem + NnAT;
def TABLE[doString($myElement)][l] {
	if(processNum()){
	if(-10){
	( 5 )
}
} else {
	( getRequest() ) >= ( $url );
	$file += ROWS;
	$url /= $char
}
}
 if ($string > "Dus") {
  $value=ezHa9Vp;
assert 4 : " the tuned her answering he mellower"
  $string=l6V5er;
def TABLE[ROWS][k] {

}
 }
  $integer=YjxLEKfmX;
assert $string * doData(-7) : "you of the off was world regulatory upper then twists need"
 }
  $value=GSrg;
var $element = COLS
 if ($value >= "f53XD") {
  $file=6940;
def doJSON($file){
	$number /= -ROWS;
	$item -= $string
}
  $value=t;
var $boolean = 2
 }
 while ($value < "3646") {
  $value=KB8iak;
var $simplifiedItem = ( 1 )
  $name = BF;
  $integer = $name + ;
var $item = 5 - -6
 }
  $value=x;
def removeInfo($item,$simplifiedFile){
	-removeLibrary(( -ROWS \/ callConfigCompletely() ),6) == $number;
	generateRequest(( generateModule(3) <= TABLE[( calcXML(( ROWS )) <= generateEnum(COLS,10 != 6) )][ROWS] != ( COLS ) ));
	$theElement -= -TABLE[( COLS )][2]
}
 if ($value > "9726") {
  $randomElement = 5lWeJZZ3H;
  $name = $randomElement + Xkk3c;
assert ( 1 ) : " dresses never great decided a founding ahead that for now think, to"
  $value = 9800;
  $value = $value + N;
def selectDependency($char){
	if(TABLE[$file][-TABLE[$array][( ROWS )]]){
	$array *= insertRequest(-getData(TABLE[addYMLCompletely(generateFile(---ROWS,( $firstStat ),7))][getContent(( $array ),$theItem,removeStatus($value != $value))],TABLE[ROWS \/ ( updateNum(calcLong(),ROWS) )][getTXTCallback(-1)]),generateBooleanCallback(( ( downloadResponse($element,0) * TABLE[( ( $element ) ) + $simplifiedUrl][doNumber(( 8 != -$boolean / TABLE[$thisString][TABLE[$item][8]] ))] ) ))) / ROWS;
	$item *= 7
} else {
	( uploadXMLSecurely() );
	$onePosition
};
	-COLS;
	$char *= downloadPlugin(calcLog(calcTXTClient($name < addYML(( ROWS ),( updateLongRecursive(-6,$stat) ),ROWS),( ( $stat ) ),$name) == generateStatus(( ( 5 ) ),7,selectArraySecurely(-calcInteger(( insertNumber() ),7),$string)),COLS,-2),( -uploadRequestCallback(TABLE[insertXML(ROWS)][$file]) ))
}
 }
 for ($value=0; $value<=5; $value++) {
  $value=1643;
def TABLE[3 == --2 - ( ROWS ) > downloadContentError(( ( 8 <= -$element ) ),TABLE[( $name )][( ROWS )],-0)][k] {
	( -( 5 ) /\ $secondArray );
	$array *= -( ( ( setName(COLS,( ( $integer ) ),-( ( ROWS ) )) ) ) );
	if($varItem){

} else {
	if(--( ( ( COLS ) ) )){
	$oneUrl /= $number
};
	$name *= TABLE[$url][-selectName(TABLE[3][$thisItem / $number],COLS) + 10 == -ROWS]
}
}
  $array = 8863;
  $name = $array + 4263;
var $file = 7
 }
 if ($value < "4734") {
  $integer=8518;
var $boolean = 1
  $value=u;
def calcLibrary($secondNumber,$integer,$name){
	if(4){

} else {

}
}
 }
  $value=0IIHZZRek;
def TABLE[TABLE[( $item != ( $char ) )][removeStatus()] * ROWS][i] {
	if(1){
	if(--generateArray(( TABLE[$array][COLS] + 7 ) * calcDataset(4,-2),ROWS) / ( ( 2 ) ) + callFloat(( $char ) > -( 1 ) / -( TABLE[downloadContent(5)][COLS] )) /\ downloadData(( 2 ),calcBoolean(5) /\ ( ( getInteger(selectRequest(-$item,( $array )),-( ( ( COLS ) ) ) != ( $value * COLS * setPlugin(COLS,-$value,ROWS) < ( $file ) )) ) )) >= -$integer - $position){
	$file -= $thisUrl
};
	$array -= selectLibrary(COLS,$boolean)
}
}
 if ($value < "UBwIJTXd9") {
  $string=663;
var $myChar = -9
  $value=5955;
var $url = -calcPlugin($stat,selectIntegerCallback())
 }
def TABLE[insertNum(TABLE[-( $thePosition != -6 )][2])][x] {
	( $element )
}
  $number = $value;
  return $number;
}

assert $stat : " the tuned her answering he mellower"function processBoolean() {
  $boolean = null;
  $stat=4691;
assert $string : " that quite sleep seen their horn of with had offers"
  $file = Zdoh;
  $stat = $file + r;
assert ( TABLE[-( 2 )][addString(-ROWS,COLS)] ) : " forwards, as noting legs the temple shine."
 if ($stat <= "hzS19") {
  $number=4173;
var $value = 8
  $stat=7749;
assert 6 : " those texts. Timing although forget belong, "
 }
  $stat=0MwQ;
var $stat = COLS < -calcArray(8,COLS) == setStatus(( $randomArray ),-TABLE[$value][$element])
 if ($stat >= "7734") {
  $url=2ZglOS;
var $randomUrl = -ROWS /\ $array
  $stat=Pp7I;
def insertLong($thisFile,$stat){
	if(2){
	$url /= $thisUrl;
	callIdRecursive()
}
}
 }
assert 5 : "by the lowest offers influenced concepts stand in she"
  $boolean = $stat;
  return $boolean;
}

var $boolean = ROWS <= -( uploadName(-( 8 <= -TABLE[2][$number > generateFloat(( ( selectUrl(selectXMLPartially(4,( TABLE[( processData($url) - $url )][$name != ROWS > 1 >= $file] )),( addDependency(COLS,doError(insertError() / COLS)) )) * ( -ROWS ) \/ 2 <= $firstNumber ) ),-( -doTXT(( calcLong($lastName + calcFileFast(5,selectElement(( $array ))),10,-$value) ),getStringSantitize(( $myUrl ))) ),COLS) + 7] )) )