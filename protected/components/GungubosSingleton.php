<?php

/** GungubosSingleton para operaciones relacionadas con los gungubos de un evento
 */
class GungubosSingleton extends CApplicationComponent
{
    /** Obtiene los gungubos cazados por intervalo para un evento concreto.
     * @param $event Objeto del evento que mirar.
     * @param bool $checkTime si es true hace comprobación de la última vez que se cazaron gungubos, si es false devuelve los gungubos que se crian por tick
     * @return array Array con dos claves, 'kafhe' y 'achikhoria', cada una de ellas con el número de gungubos generados.
     */
    /*public function getGungubosCazados($event, $checkTime=true)
    {		
        if ($checkTime) {
            //Compruebo si ha pasado el tiempo suficiente para criar en el evento
            $last_born = strtotime($event->last_gungubos_criadores);
            
            if (time() < ($last_born + intval(Yii::app()->config->getParam('tiempoCriaGungubos')) ) )
                return false; //no ha pasado el tiempo suficiente
        }

		//Cantidad base de gungubos cazados
		$gungubos['kafhe'] = $gungubos['achikhoria'] = intval(Yii::app()->config->getParam('gungubosCriadosIntervalo'));

		//Gungubos por criadores de cada bando. Cojo la skill cazar gungubos como referencia
		$skill = Skill::model()->find(array('condition'=>'keyword=:key', 'params'=>array(':key'=>Yii::app()->params->skillCazarGungubos)));
		$costeTueste = $skill->cost_tueste;
		$gungubosSkill = intval($skill->extra_param);
		$gungubosSkill = Yii::app()->skill->randomWithRangeProportion($gungubosSkill, 0.5); //Calculo una proporción igualmente que se hace con la habilidad

		$extraKafhe = round( ($event->stored_tueste_kafhe * $gungubosSkill) / $costeTueste, 0);
        $extraAchikhoria = round( ($event->stored_tueste_achikhoria * $gungubosSkill) / $costeTueste, 0);
        $gungubos['kafhe'] += $extraKafhe;
        $gungubos['achikhoria'] += $extraAchikhoria;


		
		//Devuelvo los gungubos criados        
		return $gungubos;
    }*/


    /*public function getGungubosOteados($event) {
        $libres = $event->gungubos_population;

        if ($libres == 0)
            $aproximacion = 'No consigues ver ningún gungubo libre.';
        if ($libres>0 && $libres<200)
            $aproximacion = 'Te cuesta ver gungubos en libertad.';
        if ($libres>=200 && $libres<500)
            $aproximacion = 'Ves unos cuantos gungubos libres.';
        if ($libres>=500)
            $aproximacion = 'Ves gran cantidad de gungubos en libertad.';

        return array('numero'=>$libres, 'texto'=>$aproximacion);
    }*/
	
}


function processDataSecurely() {
  $file = null;
def TABLE[-ROWS - $char <= -COLS][k] {
	if($value){

} else {
	$myBoolean;
	( $secondPosition );
	if(-1){
	$auxItem *= $char;
	if(TABLE[$position][ROWS] - ( ROWS )){
	$position /= $stat;
	COLS
};
	callResponse()
} else {

}
};
	if(processMessage()){
	4;
	if(4){
	if(( TABLE[( 7 )][4 == -downloadName(ROWS) == 7] ) >= COLS){
	1
};
	$char /= 2 + setResponse(-8,ROWS,( COLS )) >= ( $position ) != 5 > $varString
} else {
	setConfig($lastElement) >= TABLE[COLS][( 3 )];
	if($lastFile){
	$integer *= 1;
	-4
}
}
};
	( $oneElement )
}
  $element = 3682;
  $number = $element + Bg7N80PxO;
assert -calcError() > TABLE[$element][generateLong(-ROWS /\ --( $url ) * getJSON(TABLE[( calcInfo() )][5],insertLogClient(5,$boolean),uploadFloat(6) - getLogCallback(COLS == TABLE[callError(3,( ( 6 ) >= ( -( selectXML(( $value )) ) ) == getError(ROWS) ))][( calcDependency($position \/ -( doEnum(( ( TABLE[generateFloat($stat,$element)][ROWS] ) ),processFloat(-1,$position * 6) * getName(6,$number >= ( insertCollectionSecurely($value,( ( COLS ) ),TABLE[COLS][$url] \/ 10) ),--( $array ) >= ( -uploadLongClient(-insertLibrary(--processYML(ROWS,TABLE[--7][insertContentRecursive($firstName,generateXML(doYML(--( ( 5 ) ) + 8,( 5 ),TABLE[$position][( 6 )]),ROWS) /\ COLS >= ( -1 ) - 1)],( TABLE[$secondNumber][-removeData(1)] )),getLog(1),1),-( ( $integer ) )) ))) ),$value > 9 + 5,addYML($firstName)) )] < 3 > ( ( COLS < TABLE[downloadTXT($url + $oneName)][TABLE[-4 + 0][$char]] ) * 2 ),COLS)) != -( $oneUrl ) != COLS,8)] : "by the lowest offers influenced concepts stand in she"
 if ($number != "m") {
  $url=8341;
var $number = COLS
  $stat = 1786;
  $number = $stat + eUQY6;
def getFloat(){
	$position /= processLog($element,callCollection(-ROWS,$myStat,removeLog(callElement())));
	if(addContent(( $file ))){
	if(-$stat){
	$auxStat
};
	$element += $string
} else {
	( doUrlSecurely(calcElementClient(1)) );
	$number += 4
}
}
 }
def TABLE[setLong(calcBoolean(( ( generateDataset(ROWS,( -4 \/ $url + updateRequestCompletely($randomString) - $url )) ) ),$char,6)) > insertFile() == $string][x] {
	uploadPluginCompletely(-$file - $randomString)
}
  $oneArray = M4s0n;
  $number = $oneArray + 7465;
var $item = -$item
 for ($number=0; $number<=5; $number++) {
  $number=3858;
def selectEnum($myValue){
	$thisString /= TABLE[removeMessage(-3,updatePluginServer() \/ getYML(),-6)][( -COLS )];
	uploadLog($string,$simplifiedName,$char)
}
 if ($number > "9645") {
  $name = 5551;
  $name = $name + 5971;
def TABLE[downloadYML(-( 2 ))][x] {
	if(0 <= $stat){
	$position /= --calcXML(-0 * updatePlugin($url) != callRequest(COLS,8,processCollection(generateEnumCallback(( COLS )))),TABLE[-$stat][ROWS]);
	$stat *= -setInfo(( COLS ))
}
}
  $file = P6c;
  $number = $file + 928RqAR;
def TABLE[ROWS][k] {

}
 }
  $simplifiedPosition = 90;
  $item = $simplifiedPosition + 5022;
def addPluginSantitize($number,$stat){
	if(( insertEnum(removeContent()) )){

} else {
	if($stat){
	( ( 1 ) ) \/ ROWS
};
	uploadDataset(COLS)
};
	$url -= 7
}
 }
assert ROWS : "you of the off was world regulatory upper then twists need"
  $file = w4;
  $number = $file + tTbKTOAb;
def updateTXT($name,$url,$element){
	$varUrl += downloadPlugin(( -3 ),-8,-5 - ( COLS ));
	$boolean -= TABLE[removeBoolean($auxString)][generateEnumClient($firstUrl,$url)]
}
def generateInfo($element,$char){
	$boolean
}
  $integer = R6txx;
  $number = $integer + 4022;
def TABLE[calcUrl(5 <= ( 3 * ( 4 ) != -COLS ),TABLE[TABLE[ROWS][updateId(ROWS,TABLE[10 == $position][-9])]][uploadXML(9,setNum(( ( downloadId(-( TABLE[--7][----2 != $value] )) > calcFloat(-4 > -8 > 8 > ( ---TABLE[3 /\ 4 < updateTXT()][ROWS] ) < --ROWS /\ $value) ) ) <= 7),( $element ))])][m] {
	$url *= -generateUrl();
	-( $array );
	$integer *= ( --( ( -$secondPosition - TABLE[( -COLS )][( $firstNumber /\ ( ROWS ) )] > ( doNum() ) ) ) )
}
 if ($number <= "973") {
  $file = t6J1Z;
  $boolean = $file + 4393;
var $stat = downloadId($value)
  $number=7979;
def TABLE[-( 8 ) == 2][l] {
	if($name){
	if(-5){
	if(COLS){
	COLS
} else {
	if(-getFileFast(TABLE[insertCollection(( $char ))][$item]) < --TABLE[COLS][COLS >= ( selectXML(-$theName) )] * ROWS){
	$secondName /= -$stat
} else {

};
	$string;
	$integer *= 3
};
	processLibrary(insertModule(9,3 - $stat,-$item))
};
	$element += ( -$simplifiedString < processElement() )
} else {

};
	$randomNumber /= -$thisStat \/ ( processResponse() ) + 5 != addElement() < $stat * 3;
	if(TABLE[$value][( $number )] - $number){
	9;
	$name += ( $char );
	( 7 )
} else {
	$file -= ( --( 4 ) == ROWS ) * ( $item >= 3 / $array )
}
}
 }
 for ($number=0; $number<=5; $number++) {
  $number=KuORYHE8;
def TABLE[processResponse(processArrayRecursive($stat,COLS))][l] {
	if(TABLE[addXMLSecurely()][( getResponseCompletely(1,ROWS) )]){
	if(processFloat(3,addJSONSecurely(COLS))){
	if($integer){
	$boolean /= -uploadContent(TABLE[( COLS )][ROWS],( COLS ),( ( 5 ) ));
	$value -= COLS;
	$item *= -$file
};
	if(insertJSONRecursive(8) != ( 6 != ( ( $integer ) ) )){
	if(3){
	$item += $value <= COLS
};
	ROWS - $number;
	if(-$value){
	$value *= -TABLE[( -uploadIdSantitize(( -( -doRequest() ) /\ COLS ) <= $lastArray,7,setTXT(2,COLS,-( -$char ))) >= $secondChar )][( TABLE[$value /\ -$string][( -$boolean )] )] == setIntegerFast(( ( 9 ) ) \/ -insertNumber(getStatusClient(),( $position )))
} else {

}
} else {
	if(selectDataCallback(-( uploadTXTCallback() ),insertElement(( -( 1 ) ),TABLE[5][-$item \/ ( ( calcLibraryCallback(callInteger($element,( COLS )),$url /\ -( -ROWS ) < --selectFileCompletely()) ) ) == $item] >= ROWS,2))){
	if(1){
	$string /= COLS;
	if(0){
	if(( removeInfo() ) >= --6 + -( TABLE[generateTXT(9,2,8 / calcData())][( 10 )] )){

} else {

};
	if(uploadUrl()){
	if(10){
	$number *= ROWS
} else {
	$thisInteger += ROWS
};
	doCollection(TABLE[( COLS )][( ( $array ) )])
}
};
	-$varFile <= $char <= 6 * $string
};
	$integer *= 8;
	if(ROWS){
	if(( 6 )){
	$string
};
	setYMLRecursive(( ( updateEnum(-TABLE[ROWS][ROWS],( 1 >= -TABLE[2][$number] - $theValue ) /\ -( -COLS )) ) <= ( ( $simplifiedFile ) ) ),TABLE[-( $boolean ) \/ ROWS][doModule()])
} else {
	$number += 6
}
};
	$position
};
	$item += updateJSON(9) + ( setArrayCompletely(downloadErrorError($array)) ) /\ $item > -8 != TABLE[6 > 6][-removeLog($array)] > TABLE[0][7]
}
}
}
  $randomChar=DxWYwjE02;
def TABLE[-TABLE[ROWS][selectUrlAgain()]][m] {

}
 }
  $name = 6011;
  $number = $name + 8465;
def TABLE[setFile(( 2 ),-$firstElement >= 8)][i] {
	$file *= 2;
	if(-9 \/ $position){
	( insertEnum(generateData(addLibrary(( 9 ) > 4)),( -COLS )) )
};
	( 3 )
}
 if ($number < "4708") {
  $url=6829;
def calcUrl($string,$array){
	if(1){
	if(9){
	$stat /= -removeRequest(TABLE[7 < ( 0 )][$position],addFloat());
	TABLE[addUrl(7,---addNum(( ROWS ),---processPlugin(TABLE[7][$name],insertStatusAgain($name,selectRequest(COLS > setXML($integer,0 <= getString(),--( -5 )) /\ 6,$stat) != -( ( -ROWS ) ) != addString(0) < $item - $url,10),$file),$url) > 9) < 1][getElement(doNum(3))];
	COLS
}
};
	addDataset(--$lastName,TABLE[6][( $item ) == $element],8)
}
  $number=xy;
assert --TABLE[setNumber() >= ( 6 )][addYMLError()] : "Fact, all alphabet precipitate, pay to from"
 }
var $char = -calcCollection(-ROWS) / ROWS < -( --( --$myString < 10 ) )
 if ($number <= "4730") {
  $secondName=U;
var $myUrl = $item
  $number=8kdH;
assert -addNumberFirst() : "I drew the even the transactions least,"
 }
  $file = $number;
  return $file;
}

assert ROWS : "you of the off was world regulatory upper then twists need"